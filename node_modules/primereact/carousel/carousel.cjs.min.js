"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),r=require("primereact/hooks"),n=require("primereact/icons/chevrondown"),a=require("primereact/icons/chevronleft"),o=require("primereact/icons/chevronright"),l=require("primereact/icons/chevronup"),u=require("primereact/ripple"),c=require("primereact/utils"),i=require("primereact/componentbase");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var p=m(e),f=s(t);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function d(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(e){var t=d(e,"string");return"symbol"===v(t)?t:String(t)}function b(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e){if(Array.isArray(e))return y(e)}function P(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function N(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e){if(Array.isArray(e))return e}function E(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,u=[],c=!0,i=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{if(!c&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(i)throw a}}return u}}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){return S(e)||E(e,t)||N(e,t)||O()}var w=i.ComponentBase.extend({defaultProps:{__TYPE:"Carousel",id:null,value:null,page:0,header:null,footer:null,style:null,className:null,itemTemplate:null,circular:!1,showIndicators:!0,showNavigators:!0,autoplayInterval:0,numVisible:1,numScroll:1,prevIcon:null,nextIcon:null,responsiveOptions:null,orientation:"horizontal",verticalViewPortHeight:"300px",contentClassName:null,containerClassName:null,indicatorsContentClassName:null,onPageChange:null,children:void 0}});function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=p.memo((function(e){var t=e.template(e.item),r=c.classNames(e.className,"p-carousel-item",{"p-carousel-item-active":e.active,"p-carousel-item-start":e.start,"p-carousel-item-end":e.end}),n=e.ptm(e.className&&"p-carousel-item-cloned"===e.className?"itemCloned":"item"),a=c.mergeProps({className:r},n);return p.createElement("div",a,t)})),k=p.memo(p.forwardRef((function(e,i){var s=p.useContext(t.PrimeReactContext),m=w.getProps(e,s),v=C(p.useState(m.numVisible),2),d=v[0],g=v[1],b=C(p.useState(m.numScroll),2),y=b[0],S=b[1],E=C(p.useState(m.page*m.numScroll*-1),2),O=E[0],j=E[1],k=C(p.useState(m.page),2),T=k[0],D=k[1],M=w.setMetaData({props:m,state:{numVisible:d,numScroll:y,totalShiftedItems:O,page:T}}).ptm,A=p.useRef(null),q=p.useRef(null),V=p.useRef(0),L=p.useRef(!!m.autoplayInterval),H=p.useRef(""),U=p.useRef(20),_=p.useRef(null),B=p.useRef(null),z=p.useRef(null),X=p.useRef(!1),Y=p.useRef(null),J=r.usePrevious(y),F=r.usePrevious(d),W=r.usePrevious(m.value),$=r.usePrevious(m.page),G="vertical"===m.orientation,K=m.circular||!!m.autoplayInterval,Q=K&&m.value&&m.value.length>=d,Z=m.value?Math.max(Math.ceil((m.value.length-d)/y)+1,0):0,ee=Z&&m.autoplayInterval&&L.current,te=m.onPageChange&&!ee,re=te?m.page:T,ne=C(r.useResizeListener({listener:function(){oe()},when:m.responsiveOptions}),1)[0],ae=function(e,t){var r=O;null!=t?(r=y*t*-1,Q&&(r-=d),X.current=!1):(r+=y*e,X.current&&(r+=V.current-y*e,X.current=!1),t=Math.abs(Math.floor((Q?r+d:r)/y)));Q&&T===Z-1&&-1===e?(r=-1*(m.value.length+d),t=0):Q&&0===T&&1===e?(r=0,t=Z-1):t===Z-1&&V.current>0&&(r+=-1*V.current-y*e,X.current=!0),q.current&&(c.DomHandler.removeClass(q.current,"p-items-hidden"),be(r),q.current.style.transition="transform 500ms ease 0s"),ye(t),j(r)},oe=function(){if(q.current&&Y.current){for(var e=window.innerWidth,t={numVisible:m.numVisible,numScroll:m.numScroll},r=0;r<Y.current.length;r++){var n=Y.current[r];parseInt(n.breakpoint,10)>=e&&(t=n)}if(y!==t.numScroll){var a=Math.floor(re*y/t.numScroll),o=t.numScroll*a*-1;Q&&(o-=t.numVisible),j(o),S(t.numScroll),ye(a)}d!==t.numVisible&&g(t.numVisible)}},le=function(e,t){(K||0!==re)&&ae(1,t),L.current=!1,e.cancelable&&e.preventDefault()},ue=function(e,t){(K||re<Z-1)&&ae(-1,t),L.current=!1,e.cancelable&&e.preventDefault()},ce=function(e,t){t>re?ue(e,t):t<re&&le(e,t)},ie=function(e){q.current&&"transform"===e.propertyName&&(c.DomHandler.addClass(q.current,"p-items-hidden"),q.current.style.transition="",0!==T&&T!==Z-1||!Q||be(O))},se=function(e){var t=e.changedTouches[0];_.current={x:t.pageX,y:t.pageY}},me=function(e){e.cancelable&&e.preventDefault()},pe=function(e){var t=e.changedTouches[0];fe(e,G?t.pageY-_.current.y:t.pageX-_.current.x)},fe=function(e,t){Math.abs(t)>U&&(t<0?ue(e):le(e))},ve=function(){m.autoplayInterval>0&&(B.current=setInterval((function(){ae(-1,T===Z-1?0:T+1)}),m.autoplayInterval))},de=function(){B.current&&clearInterval(B.current)},ge=function(){z.current||(z.current=c.DomHandler.createInlineStyle(s&&s.nonce||f.default.nonce));var e,t="\n            .p-carousel[".concat(H.current,"] .p-carousel-item {\n                flex: 1 0 ").concat(100/d,"%\n            }\n        ");if(m.responsiveOptions){Y.current=h(e=m.responsiveOptions)||P(e)||N(e)||I(),Y.current.sort((function(e,t){return c.ObjectUtils.sort(e.breakpoint,t.breakpoint,-1,s&&s.locale||f.default.locale,s&&s.nullSortOrder||f.default.nullSortOrder)}));for(var r=0;r<Y.current.length;r++){var n=Y.current[r];t+="\n                    @media screen and (max-width: ".concat(n.breakpoint,") {\n                        .p-carousel[").concat(H.current,"] .p-carousel-item {\n                            flex: 1 0 ").concat(100/n.numVisible,"%\n                        }\n                    }\n                ")}}z.current.innerHTML=t},be=function(e){q.current&&(q.current.style.transform=G?"translate3d(0, ".concat(e*(100/d),"%, 0)"):"translate3d(".concat(e*(100/d),"%, 0, 0)"))},ye=function(e){!te&&D(e),m.onPageChange&&m.onPageChange({page:e})};p.useImperativeHandle(i,(function(){return{props:m,startAutoplay:ve,stopAutoplay:de,getElement:function(){return A.current}}})),r.useMountEffect((function(){A.current&&(H.current=c.UniqueComponentId(),A.current.setAttribute(H.current,"")),ge(),oe(),be(O),ne()})),r.useUpdateEffect((function(){var e=!1,t=O;if(m.autoplayInterval&&de(),J!==y||F!==d||m.value&&W&&W.length!==m.value.length){V.current=(m.value.length-d)%y;var r=re;0!==Z&&r>=Z&&(ye(r=Z-1),e=!0),t=r*y*-1,Q&&(t-=d),r===Z-1&&V.current>0?(t+=-1*V.current+y,X.current=!0):X.current=!1,t!==O&&(j(t),e=!0),be(t)}Q&&(0===T?t=-1*d:0===t&&(t=-1*m.value.length,V.current>0&&(X.current=!0)),t!==O&&(j(t),e=!0)),$!==m.page&&(m.page>$&&m.page<=Z-1?ae(-1,m.page):m.page<$&&ae(1,m.page)),!e&&ee&&ve()})),r.useUnmountEffect((function(){m.autoplayInterval&&de(),z.current=c.DomHandler.removeInlineStyle(z.current)}));var he=function(){if(m.value&&m.value.length){var e=null,t=null;if(Q){var r=null;e=(r=m.value.slice(-1*d)).map((function(e,t){return p.createElement(R,{key:t+"_scloned",className:"p-carousel-item-cloned",template:m.itemTemplate,item:e,active:-1*O===m.value.length+d,start:0===t,end:t===r.length-1,ptm:M})})),t=(r=m.value.slice(0,d)).map((function(e,t){return p.createElement(R,{key:t+"_fcloned",className:"p-carousel-item-cloned",template:m.itemTemplate,item:e,active:0===O,start:0===t,end:t===r.length-1,ptm:M})}))}var n=m.value.map((function(e,t){var r=Q?-1*(O+d):-1*O,n=r+d-1;return p.createElement(R,{key:t,template:m.itemTemplate,item:e,active:r<=t&&n>=t,start:r===t,end:n===t,ptm:M})}));return p.createElement(p.Fragment,null,e,n,t)}},Pe=function(){if(m.showNavigators){var e=(!K||m.value&&m.value.length<d)&&0===re,r=c.classNames("p-carousel-prev p-link",{"p-disabled":e}),n=c.mergeProps({className:"p-carousel-prev-icon"},M("previousButtonIcon")),o=c.IconUtils.getJSXIcon(G?m.prevIcon||p.createElement(l.ChevronUpIcon,n):m.prevIcon||p.createElement(a.ChevronLeftIcon,n),x({},n),{props:m}),i=c.mergeProps({type:"button",className:r,onClick:function(e){return le(e)},disabled:e,"aria-label":t.ariaLabel("previousPageLabel")},M("previousButton"));return p.createElement("button",i,o,p.createElement(u.Ripple,null))}return null},Ne=function(){if(m.showNavigators){var e=(!K||m.value&&m.value.length<d)&&(re===Z-1||0===Z),r=c.classNames("p-carousel-next p-link",{"p-disabled":e}),a=c.mergeProps({className:"p-carousel-next-icon"},M("nextButtonIcon")),l=c.IconUtils.getJSXIcon(G?m.nextIcon||p.createElement(n.ChevronDownIcon,a):m.nextIcon||p.createElement(o.ChevronRightIcon,a),x({},a),{props:m}),i=c.mergeProps({type:"button",className:r,onClick:function(e){return ue(e)},disabled:e,"aria-label":t.ariaLabel("nextPageLabel")},M("nextButton"));return p.createElement("button",i,l,p.createElement(u.Ripple,null))}return null},Ie=function(e){var r="carousel-indicator-"+e,n=c.classNames("p-carousel-indicator",{"p-highlight":re===e}),a=c.mergeProps({key:r,className:n},M("indicator")),o=c.mergeProps({type:"button",className:"p-link",onClick:function(t){return ce(t,e)},"aria-label":"".concat(t.ariaLabel("pageLabel")," ").concat(e+1)},M("indicatorButton"));return p.createElement("li",a,p.createElement("button",o,p.createElement(u.Ripple,null)))},Se=c.classNames("p-carousel p-component",{"p-carousel-vertical":G,"p-carousel-horizontal":!G},m.className),Ee=c.classNames("p-carousel-content",m.contentClassName),Oe=function(){var e=he(),t=G?m.verticalViewPortHeight:"auto",r=Pe(),n=Ne(),a=c.classNames("p-carousel-container",m.containerClassName),o=c.mergeProps({className:"p-carousel-items-content",style:{height:t},onTouchStart:function(e){return se(e)},onTouchMove:function(e){return me(e)},onTouchEnd:function(e){return pe(e)}},M("itemsContent")),l=c.mergeProps({className:a},M("container")),u=c.mergeProps({ref:q,className:"p-carousel-items-container",onTransitionEnd:ie},M("itemsContainer"));return p.createElement("div",l,r,p.createElement("div",o,p.createElement("div",u,e)),n)}(),Ce=function(){if(m.showIndicators){for(var e=c.classNames("p-carousel-indicators p-reset",m.indicatorsContentClassName),t=[],r=0;r<Z;r++)t.push(Ie(r));var n=c.mergeProps({className:e},M("indicators"));return p.createElement("ul",n,t)}return null}(),we=function(){if(m.header){var e=c.mergeProps({className:"p-carousel-header"},M("header"));return p.createElement("div",e,m.header)}return null}(),je=function(){if(m.footer){var e=c.mergeProps({className:"p-carousel-footer"},M("footer"));return p.createElement("div",e,m.footer)}return null}(),xe=c.mergeProps({id:m.id,ref:A,className:Se,style:m.style},w.getOtherProps(m),M("root")),Re=c.mergeProps({className:Ee},M("content"));return p.createElement("div",xe,we,p.createElement("div",Re,Oe,Ce),je)})));R.displayName="CarouselItem",k.displayName="Carousel",exports.Carousel=k;
